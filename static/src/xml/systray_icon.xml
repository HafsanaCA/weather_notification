<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
  <t t-name="weather_systray.weatherSystray" owl="1">
    <div class="o_MessagingMenu dropdown">
      <a class="dropdown-toggle o-no-caret" data-bs-toggle="dropdown" role="button"
         aria-haspopup="true" aria-expanded="false">
        <i class="fa fa-cloud" style="font-size: 20px; color: white;"/>
      </a>
      <div class="dropdown-menu dropdown-menu-end p-0"
             style="width: 320px; background-color: #ffffff; border-radius: 10px; box-shadow: 0 8px 16px rgba(0,0,0,0.2); overflow: hidden;">
        <div t-if="state.hasData" class="p-3" style="font-family: 'Segoe UI', sans-serif;">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <div>
              <div class="text-primary" style="font-weight: bold; font-size: 16px;">
                <t t-esc="state.city"/>
              </div>
              <div class="text-muted" style="font-size: 12px;">
                <t t-esc="new Date().toDateString()"/>
              </div>
              </div>
              <img t-att-src="'https://openweathermap.org/img/wn/' + state.icon + '@2x.png'"
                   style="width: 80px; height: 80px;"/>
            </div>
            <div class="mb-2" style="font-size: 24px; font-weight: 600;">
              <t t-esc="state.temp"/>°C
            </div>
            <div class="text-capitalize mb-1" style="color: #666;">
              <t t-esc="state.description"/>
                  (<t t-esc="state.main"/>)
            </div>
            <div class="text-muted mt-2" style="font-size: 13px;">
              <p style="font-weight: 700;">Wind Speed: <t t-esc="state.wind_speed"/></p>
            </div>
            <hr/>
            <div style="font-size: 11px; color: #999;">
              Last updated at: <br/>
                  <t t-esc="state.updated_at"/>
            </div>
          </div>

          <div t-if="!state.hasData" class="p-3 text-danger"
                 style="font-family: 'Segoe UI', sans-serif; background-color: #fff3f3;">
            <div class="fw-bold mb-2">⚠️ Weather Info Unavailable</div>
            <div style="font-size: 13px;">
              Please verify your API key or city settings.
            </div>
          </div>
        </div>
    </div>
  </t>
</templates>
